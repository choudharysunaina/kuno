import{r as n,j as t,m as v}from"./index-DaTFgDAX.js";const Z=({src:e,alt:l,className:m="",sizes:p="100vw",priority:i=!1,placeholder:g="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YWFhYSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvYWRpbmcuLi48L3RleHQ+PC9zdmc+",fallbackSrc:o,onLoad:c,onError:u})=>{const[s,I]=n.useState(!1),[a,r]=n.useState(!1),[x,d]=n.useState(!1),w=n.useRef(null),f=n.useRef(null);n.useEffect(()=>{if(d(!0),i){d(!0);return}return()=>{f.current&&f.current.disconnect()}},[i]);const b=()=>{I(!0),c==null||c()},j=()=>{r(!0),u==null||u()},h=a&&o?o:e;return t.jsxs("div",{className:`relative overflow-hidden ${m}`,children:[!s&&t.jsx("div",{className:"absolute inset-0 bg-gray-100 animate-pulse flex items-center justify-center",children:t.jsx("div",{className:"text-gray-400 text-sm",children:"Loading..."})}),t.jsx(v.img,{ref:w,src:h,alt:l,className:`w-full h-full object-cover transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,loading:i?"eager":"lazy",sizes:p,onLoad:b,onError:j,initial:{opacity:0,scale:1.05},animate:{opacity:s?1:0,scale:s?1:1.05},transition:{duration:.3}})]})},W=({src:e,alt:l,className:m="",sizes:p="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",priority:i=!1,fallbackSrc:g,onLoad:o,onError:c})=>{const s=(a=>{const r=a.lastIndexOf(".");if(r===-1)return a;const x=a.substring(0,r),d=a.substring(r);return[".jpg",".jpeg",".png"].includes(d.toLowerCase())?`${x}.webp`:a})(e),I=typeof window<"u"&&"WebP"in window;return t.jsxs("picture",{children:[I&&s!==e&&t.jsx("source",{src:s,type:"image/webp"}),t.jsx("source",{src:e,type:e.endsWith(".jpg")||e.endsWith(".jpeg")?"image/jpeg":"image/png"}),t.jsx(Z,{src:e,alt:l,className:m,sizes:p,priority:i,fallbackSrc:g,onLoad:o,onError:c})]})};export{W as R};
